!function(t,n){"use strict";var e=0,r=1,o=2,i=function(t){return t&&"function"==typeof t.then},c=function(t){if(this._state=e,this._on_resolve=null,this._on_reject=null,this._ret=null,"function"!=typeof t)throw new Error("TypeError: argument[0] of SyncPromise.constructor must be function.");try{t(this._resolver.bind(this),this._rejector.bind(this))}catch(n){this._state=o,this._ret=n}};c.prototype._resolver=function(t){var n=this;if(this._state===e){if(i(t))return t.then(function(t){n._ret=t,"function"==typeof n._on_resolve&&n._on_resolve(t)})["catch"](function(t){n._ret=t,"function"==typeof n._on_reject&&n._on_reject(t)});this._state=r,n._ret=t,"function"==typeof this._on_resolve&&this._on_resolve(this._ret)}},c.prototype._rejector=function(t){var n=this;if(this._state===e){if(i(t))return t.then(function(t){n._ret=t,"function"==typeof n._on_reject&&n._on_reject(n._ret)})["catch"](function(t){n._ret=t,"function"==typeof n._on_reject&&n._on_reject(t)});this._state=o,this._ret=t,"function"==typeof this._on_reject&&this._on_reject(this._ret)}},c.prototype.then=function(t){var n=this,e=null;if("function"!=typeof t)throw new Error("TypeError: argument[0] of SyncPromise#then must be function.");if(this._state!==r)return new c(this._state===o?function(t,e){e(n._ret)}:function(e,r){n._on_resolve=function(n){try{var o=t(n);i(o)?o.then(function(t){e(t)}):e(o)}catch(c){r(c)}},n._on_reject=function(t){r(t)}});try{return e=t(this._ret),e&&"function"==typeof e.then?e:new c(function(t){t(e)})}catch(f){return new c(function(t,n){n(f)})}},c.prototype["catch"]=function(t){var n=this,e=null;if("function"!=typeof t)throw new Error("TypeError: argument[0] of SyncPromise#catch must be function.");if(this._state===r)return new c(function(t){t(n._ret)});if(this._state!==o)return new c(function(e,r){n._on_reject=function(o){try{var c=t(o);i(c)?c.then(function(t){n._ret=t}):e(c)}catch(f){r(f)}},n._on_resolve=function(t){e(t)}});try{return e=t(this._ret),e&&"function"==typeof e.then?e:new c(function(t){t(e)})}catch(f){return new c(function(t,n){n(f)})}},c.all=function(){if(!Array.isArray(arguments[0]))throw new Error("TypeError:");var t=arguments[0].concat(),n=[];return new c(function(e,r){var o=function i(){try{0===t.length&&e(n);var o=t.shift();"function"==typeof o.then?o.then(function(t){n[n.length]=t,i()})["catch"](function(t){r(t)}):(n[n.length]=o,i())}catch(c){r(c)}};o()})},t.SyncPromise=c,n.SyncPromise=c}(this,(0,eval)("this"));